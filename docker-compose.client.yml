version: '2'
services:
  api:
    extends:
      file: docker-compose.api.yml
      service: api
  soap.api:
    extends:
      file: soap.api/docker-compose.yml
      service: soap.api
  client:
    image: maven:3.3.3-jdk-8
    volumes:
      - ${HOME}/glytoucan/maven:/root/.m2
      - ./client:/workspace
      - /etc/localtime:/etc/localtime
    working_dir: /workspace
    command: mvn -U test
    links:
      - api:test.api.glytoucan.org
      - soap.api:test.soap.api.glytoucan.org
